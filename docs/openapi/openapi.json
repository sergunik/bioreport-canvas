{
    "openapi": "3.1.0",
    "info": {
        "title": "BioReport API",
        "version": "1.0.0",
        "description": "**BioReport API** \u2014 privacy-first medical records platform.\n\n- **Authentication**: JWT via HTTP-only secure cookies (access + refresh).\n- **Account**: One account per user; create after registration.\n- **Diagnostic reports**: Attach observations (biomarkers) to reports.\n\nAll authenticated endpoints require a valid JWT in the `Authorization: Bearer <token>` header or cookie."
    },
    "servers": [
        {
            "url": "http://localhost/api"
        }
    ],
    "security": [
        {
            "http": []
        }
    ],
    "paths": {
        "/account": {
            "post": {
                "operationId": "account.store",
                "summary": "Creates an account for the current user",
                "tags": [
                    "Account"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateAccountRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created account",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "id": "1",
                                            "nickname": null,
                                            "date_of_birth": "1990-01-15",
                                            "sex": "male",
                                            "language": "uk",
                                            "timezone": "Europe/Kyiv"
                                        }
                                    ],
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "nickname": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "date_of_birth": {
                                            "type": "string"
                                        },
                                        "sex": {
                                            "type": "string"
                                        },
                                        "language": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "timezone": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "nickname",
                                        "date_of_birth",
                                        "sex",
                                        "language",
                                        "timezone"
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "account_exists"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "get": {
                "operationId": "account.show",
                "summary": "Returns the current user account",
                "tags": [
                    "Account"
                ],
                "responses": {
                    "200": {
                        "description": "Current account",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "id": "1",
                                            "nickname": "John",
                                            "date_of_birth": "1990-01-15",
                                            "sex": "male",
                                            "language": "uk",
                                            "timezone": "Europe/Kyiv"
                                        }
                                    ],
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "nickname": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "date_of_birth": {
                                            "type": "string"
                                        },
                                        "sex": {
                                            "type": "string"
                                        },
                                        "language": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "timezone": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "nickname",
                                        "date_of_birth",
                                        "sex",
                                        "language",
                                        "timezone"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "patch": {
                "operationId": "account.update",
                "summary": "Updates the current user account",
                "tags": [
                    "Account"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateAccountRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "status": "updated"
                                        }
                                    ],
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "updated"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "account.destroy",
                "summary": "Deletes the current user account",
                "tags": [
                    "Account"
                ],
                "responses": {
                    "200": {
                        "description": "Account deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "status": "account_deleted"
                                        }
                                    ],
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "account_deleted"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/diagnostic-reports": {
            "post": {
                "operationId": "diagnosticReport.store",
                "summary": "Creates a diagnostic report for the current user",
                "tags": [
                    "DiagnosticReport"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreDiagnosticReportRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created report",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "id": 1,
                                            "report_type": "CBC",
                                            "source": "lab",
                                            "notes": "Fasting sample",
                                            "created_at": "2025-02-09T12:00:00.000000Z",
                                            "updated_at": "2025-02-09T12:00:00.000000Z",
                                            "observations": [
                                                {
                                                    "id": 1,
                                                    "biomarker_name": "Hemoglobin",
                                                    "biomarker_code": "718-7",
                                                    "original_value": 14.2,
                                                    "original_unit": "g/dL",
                                                    "normalized_value": 14.2,
                                                    "normalized_unit": "g/dL",
                                                    "reference_range_min": 12,
                                                    "reference_range_max": 16,
                                                    "reference_unit": "g/dL"
                                                }
                                            ]
                                        }
                                    ],
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "report_type": {
                                            "type": "string"
                                        },
                                        "source": {
                                            "type": "string"
                                        },
                                        "notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "created_at": {
                                            "type": "string"
                                        },
                                        "updated_at": {
                                            "type": "string"
                                        },
                                        "observations": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ObservationResource"
                                            }
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "report_type",
                                        "source",
                                        "notes",
                                        "created_at",
                                        "updated_at",
                                        "observations"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "get": {
                "operationId": "diagnosticReport.index",
                "summary": "Lists diagnostic reports for the current user",
                "tags": [
                    "DiagnosticReport"
                ],
                "responses": {
                    "200": {
                        "description": "List of reports",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "data": [
                                                {
                                                    "id": 1,
                                                    "report_type": "CBC",
                                                    "source": "lab",
                                                    "notes": null,
                                                    "created_at": "2025-02-09T12:00:00.000000Z",
                                                    "updated_at": "2025-02-09T12:00:00.000000Z",
                                                    "observations": []
                                                }
                                            ]
                                        }
                                    ],
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/DiagnosticReportResource"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/diagnostic-reports/{id}": {
            "get": {
                "operationId": "diagnosticReport.show",
                "summary": "Returns a single diagnostic report for the current user",
                "tags": [
                    "DiagnosticReport"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Single report",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "id": 1,
                                            "report_type": "CBC",
                                            "source": "lab",
                                            "notes": null,
                                            "created_at": "2025-02-09T12:00:00.000000Z",
                                            "updated_at": "2025-02-09T12:00:00.000000Z",
                                            "observations": [
                                                {
                                                    "id": 1,
                                                    "biomarker_name": "Hemoglobin",
                                                    "biomarker_code": "718-7",
                                                    "original_value": 14.2,
                                                    "original_unit": "g/dL",
                                                    "normalized_value": null,
                                                    "normalized_unit": null,
                                                    "reference_range_min": null,
                                                    "reference_range_max": null,
                                                    "reference_unit": null
                                                }
                                            ]
                                        }
                                    ],
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "report_type": {
                                            "type": "string"
                                        },
                                        "source": {
                                            "type": "string"
                                        },
                                        "notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "created_at": {
                                            "type": "string"
                                        },
                                        "updated_at": {
                                            "type": "string"
                                        },
                                        "observations": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ObservationResource"
                                            }
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "report_type",
                                        "source",
                                        "notes",
                                        "created_at",
                                        "updated_at",
                                        "observations"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "An error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "description": "Error overview.",
                                            "example": ""
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "patch": {
                "operationId": "diagnosticReport.update",
                "summary": "Updates a diagnostic report for the current user",
                "tags": [
                    "DiagnosticReport"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateDiagnosticReportRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated report",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "id": 1,
                                            "report_type": "CBC",
                                            "source": "lab",
                                            "notes": "Updated",
                                            "created_at": "2025-02-09T12:00:00.000000Z",
                                            "updated_at": "2025-02-09T12:30:00.000000Z",
                                            "observations": []
                                        }
                                    ],
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "report_type": {
                                            "type": "string"
                                        },
                                        "source": {
                                            "type": "string"
                                        },
                                        "notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "created_at": {
                                            "type": "string"
                                        },
                                        "updated_at": {
                                            "type": "string"
                                        },
                                        "observations": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ObservationResource"
                                            }
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "report_type",
                                        "source",
                                        "notes",
                                        "created_at",
                                        "updated_at",
                                        "observations"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "An error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "description": "Error overview.",
                                            "example": ""
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "diagnosticReport.destroy",
                "summary": "Deletes a diagnostic report for the current user",
                "tags": [
                    "DiagnosticReport"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No content"
                    },
                    "404": {
                        "description": "An error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "description": "Error overview.",
                                            "example": ""
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/auth/password/forgot": {
            "post": {
                "operationId": "auth.forgotPassword",
                "tags": [
                    "ForgotPassword"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ForgotPasswordRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reset email sent",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "status": "ok"
                                        }
                                    ],
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "ok"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                },
                "security": []
            }
        },
        "/health": {
            "get": {
                "operationId": "health.index",
                "summary": "Returns health check payload: service name, environment, version, and current timestamp (ISO 8601)",
                "tags": [
                    "Health"
                ],
                "responses": {
                    "200": {
                        "description": "Health status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "service": "BioReport",
                                            "environment": "local",
                                            "version": "1.0.0",
                                            "timestamp": "2025-02-09T12:00:00+00:00"
                                        }
                                    ],
                                    "properties": {
                                        "service": {
                                            "type": "string"
                                        },
                                        "environment": {
                                            "type": "string"
                                        },
                                        "version": {
                                            "type": "string"
                                        },
                                        "timestamp": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "service",
                                        "environment",
                                        "version",
                                        "timestamp"
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": []
            }
        },
        "/auth/login": {
            "post": {
                "operationId": "auth.login",
                "tags": [
                    "Login"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Authenticated user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "user": {
                                                "id": "1",
                                                "email": "user@example.com"
                                            }
                                        }
                                    ],
                                    "properties": {
                                        "user": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Invalid credentials"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                },
                "security": []
            }
        },
        "/auth/logout": {
            "post": {
                "operationId": "auth.logout",
                "tags": [
                    "Logout"
                ],
                "responses": {
                    "200": {
                        "description": "Logged out",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "status": "logged_out"
                                        }
                                    ],
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "logged_out"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "status"
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": []
            }
        },
        "/auth/refresh": {
            "post": {
                "operationId": "auth.refresh",
                "tags": [
                    "Refresh"
                ],
                "responses": {
                    "200": {
                        "description": "New tokens issued",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "status": "ok"
                                        }
                                    ],
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "ok"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Invalid or expired refresh token"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Refresh token required"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": []
            }
        },
        "/auth/register": {
            "post": {
                "operationId": "auth.register",
                "tags": [
                    "Register"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RegisterRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "user": {
                                                "id": "1",
                                                "email": "user@example.com"
                                            }
                                        }
                                    ],
                                    "properties": {
                                        "user": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "email"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                },
                "security": []
            }
        },
        "/auth/password/reset": {
            "post": {
                "operationId": "auth.resetPassword",
                "tags": [
                    "ResetPassword"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ResetPasswordRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password reset",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "examples": [
                                        {
                                            "user": "1"
                                        }
                                    ],
                                    "properties": {
                                        "user": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Invalid or expired reset token"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                },
                "security": []
            }
        }
    },
    "components": {
        "securitySchemes": {
            "http": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        },
        "schemas": {
            "CreateAccountRequest": {
                "type": "object",
                "properties": {
                    "sex": {
                        "type": "string",
                        "enum": [
                            "male",
                            "female"
                        ],
                        "example": "male"
                    },
                    "date_of_birth": {
                        "type": "string",
                        "format": "date",
                        "example": "1990-01-15"
                    },
                    "nickname": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "example": "John",
                        "maxLength": 255
                    },
                    "language": {
                        "type": "string",
                        "example": "uk",
                        "minLength": 2,
                        "maxLength": 2
                    },
                    "timezone": {
                        "type": "string",
                        "example": "Europe/Kyiv"
                    }
                },
                "required": [
                    "sex",
                    "date_of_birth"
                ],
                "title": "CreateAccountRequest"
            },
            "DiagnosticReportResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "report_type": {
                        "type": "string"
                    },
                    "source": {
                        "type": "string"
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "updated_at": {
                        "type": "string"
                    },
                    "observations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ObservationResource"
                        }
                    }
                },
                "required": [
                    "id",
                    "report_type",
                    "source",
                    "notes",
                    "created_at",
                    "updated_at"
                ],
                "title": "DiagnosticReportResource"
            },
            "ForgotPasswordRequest": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "user@example.com"
                    }
                },
                "required": [
                    "email"
                ],
                "title": "ForgotPasswordRequest"
            },
            "LoginRequest": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "user@example.com"
                    },
                    "password": {
                        "type": "string",
                        "example": "SecureP@ssw0rd123"
                    }
                },
                "required": [
                    "email",
                    "password"
                ],
                "title": "LoginRequest"
            },
            "ObservationResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "biomarker_name": {
                        "type": "string"
                    },
                    "biomarker_code": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "original_value": {
                        "type": "number"
                    },
                    "original_unit": {
                        "type": "string"
                    },
                    "normalized_value": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "normalized_unit": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "reference_range_min": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "reference_range_max": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "reference_unit": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "required": [
                    "id",
                    "biomarker_name",
                    "biomarker_code",
                    "original_value",
                    "original_unit",
                    "normalized_value",
                    "normalized_unit",
                    "reference_range_min",
                    "reference_range_max",
                    "reference_unit"
                ],
                "title": "ObservationResource"
            },
            "RegisterRequest": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "user@example.com",
                        "maxLength": 255
                    },
                    "password": {
                        "type": "string",
                        "example": "SecureP@ssw0rd123",
                        "minLength": 12
                    }
                },
                "required": [
                    "email",
                    "password"
                ],
                "title": "RegisterRequest"
            },
            "ResetPasswordRequest": {
                "type": "object",
                "properties": {
                    "token": {
                        "type": "string",
                        "example": "reset-token-from-email"
                    },
                    "password": {
                        "type": "string",
                        "example": "NewSecureP@ssw0rd123",
                        "minLength": 12
                    }
                },
                "required": [
                    "token",
                    "password"
                ],
                "title": "ResetPasswordRequest"
            },
            "StoreDiagnosticReportRequest": {
                "type": "object",
                "properties": {
                    "report_type": {
                        "type": "string",
                        "example": "CBC",
                        "maxLength": 255
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "example": "Fasting sample"
                    },
                    "observations": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "biomarker_name": {
                                    "type": "string",
                                    "example": "Hemoglobin",
                                    "maxLength": 255
                                },
                                "biomarker_code": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "example": "718-7",
                                    "maxLength": 255
                                },
                                "original_value": {
                                    "type": "number",
                                    "example": 14.2
                                },
                                "original_unit": {
                                    "type": "string",
                                    "example": "g/dL",
                                    "maxLength": 64
                                },
                                "normalized_value": {
                                    "type": [
                                        "number",
                                        "null"
                                    ]
                                },
                                "normalized_unit": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "maxLength": 64
                                },
                                "reference_range_min": {
                                    "type": [
                                        "number",
                                        "null"
                                    ]
                                },
                                "reference_range_max": {
                                    "type": [
                                        "number",
                                        "null"
                                    ]
                                },
                                "reference_unit": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "maxLength": 64
                                }
                            },
                            "required": [
                                "biomarker_name",
                                "original_value",
                                "original_unit"
                            ]
                        },
                        "minItems": 1
                    }
                },
                "required": [
                    "report_type",
                    "observations"
                ],
                "title": "StoreDiagnosticReportRequest"
            },
            "UpdateAccountRequest": {
                "type": "object",
                "properties": {
                    "nickname": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "example": "John",
                        "maxLength": 255
                    },
                    "language": {
                        "type": "string",
                        "example": "uk",
                        "minLength": 2,
                        "maxLength": 2
                    },
                    "timezone": {
                        "type": "string",
                        "example": "Europe/Kyiv"
                    },
                    "user_id": {
                        "type": "string"
                    },
                    "sex": {
                        "type": "string"
                    },
                    "date_of_birth": {
                        "type": "string"
                    }
                },
                "title": "UpdateAccountRequest"
            },
            "UpdateDiagnosticReportRequest": {
                "type": "object",
                "properties": {
                    "report_type": {
                        "type": "string",
                        "example": "CBC",
                        "maxLength": 255
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "example": "Updated notes"
                    },
                    "observations": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": [
                                        "integer",
                                        "null"
                                    ],
                                    "example": 1,
                                    "minimum": 1
                                },
                                "biomarker_name": {
                                    "type": "string",
                                    "example": "Hemoglobin",
                                    "maxLength": 255
                                },
                                "biomarker_code": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "example": "718-7",
                                    "maxLength": 255
                                },
                                "original_value": {
                                    "type": "number",
                                    "example": 14.2
                                },
                                "original_unit": {
                                    "type": "string",
                                    "example": "g/dL",
                                    "maxLength": 64
                                },
                                "normalized_value": {
                                    "type": [
                                        "number",
                                        "null"
                                    ]
                                },
                                "normalized_unit": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "maxLength": 64
                                },
                                "reference_range_min": {
                                    "type": [
                                        "number",
                                        "null"
                                    ]
                                },
                                "reference_range_max": {
                                    "type": [
                                        "number",
                                        "null"
                                    ]
                                },
                                "reference_unit": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "maxLength": 64
                                }
                            },
                            "required": [
                                "biomarker_name",
                                "original_value",
                                "original_unit"
                            ]
                        }
                    }
                },
                "title": "UpdateDiagnosticReportRequest"
            }
        },
        "responses": {
            "ValidationException": {
                "description": "Validation error",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "description": "Errors overview."
                                },
                                "errors": {
                                    "type": "object",
                                    "description": "A detailed description of each field that failed validation.",
                                    "additionalProperties": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "required": [
                                "message",
                                "errors"
                            ]
                        }
                    }
                }
            },
            "AuthenticationException": {
                "description": "Unauthenticated",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "description": "Error overview."
                                }
                            },
                            "required": [
                                "message"
                            ]
                        }
                    }
                }
            }
        }
    }
}